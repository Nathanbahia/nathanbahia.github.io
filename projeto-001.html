<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300&display=swap">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css">
    <link rel="stylesheet" href="src/css/prism.css">
    <link rel="stylesheet" href="src/css/estilo.css">
    <title>@NoobPythonBR</title>
  </head>
  <body>
	
	<header class='container-fluid'>
		<img src='src/images/banner.jpg' id='banner'>
		<ul class='navbar nav '>
			<li><a target="blank" href="https://github.com/Nathanbahia"><i class="fab fa-github-square"></i></a></li>
			<li><a target="blank" href="https://linkedin.com/in/nathanbahia"><i class="fab fa-linkedin"></i></a></li>
			<li><a target="blank" href="https://instagram.com/noobpythonbr"><i class="fab fa-instagram"></i></a></li>
		</ul>
		<h1 class="myname">P-001 - Banco de Dados SQlite3</h1>
		<a href="https://github.com/Nathanbahia/noobpythonbr" target="_blank">Acesse o repositório no GitHub</a>
	</header>
	
	<hr>
	    <button class="btn btn-danger"><a href="index.html">Voltar à Página Inicial</a></button>
	<hr>

	<main class='container'>
	    
	    <div class="comment">
	        <p>Criação do classe do banco de dados:</p>
	    </div>
	    
    	<div class="codigo">
        	<pre><code class="language-python">
import sqlite3

class Banco:
    def __init__(self):
        """ Inicia conexão com o banco de dados e cria tabela de usuários
        
        ~> Inicialização das propriedades da classe:
            self.conn   : Conexão com o banco de dados 'users.bd' dentro da
            pasta database. Caso não exista esse banco de dados, um novo é criado.
            
            self.cursor : Realiza as operações dentro do banco de dados
        """
        
        self.conn = sqlite3.connect("database/users.db")
        self.cursor = self.conn.cursor()
        
        
        """
        Usando a sintaxe SQL cria-se uma tabela dentro do banco de dados
        com as seguintes características:
        
        - Nome da tabela: users
        - Campos:
            ~ username (texto e não nulo)
            ~ senha (texto e não nulo)
        """
        
        self.cursor.execute("""
            CREATE TABLE IF NOT EXISTS users (
                username TEXT NOT NULL,
                password TEXT NOT NULL
            )
        """)
        
        """
        Sempre que uma alteração for feita dentro do banco deve-se usar
        o método commit()
        """
        
        self.conn.commit()
        	</code></pre>
        </div>
        
    <div class="comment">
        <p>Método para criação de novos usuários</p>
    </div>
    
    <pre><code class="language-python">
def create_user(self, username, password):
    """ Insere no banco de dados um novo usuário com username e password
    
    Recebe dois parâmetros e os usa na sequência abaixo para inserir na
    tabela users, nos campos username e password, os dois valores recebidos
    e em seguida o self.conn.commit() é executado para salvar as alterações
    feitas no banco. Por fim, retorna True se todo o processo for concluído
    com exito.
    """
    
    self.cursor.execute(f"INSERT INTO users (username, password) VALUES ('{username}', '{password}')")
    self.conn.commit()
    return True
    </code></pre>
    
    <div class="comment">
        <p>Método para verificação seu existe determinado usuário</p>
    </div>
    
    <pre><code class="language-python">
def check_user(self, username, password):
    """
    Realizando uma busca por todos os usuários no banco de dados,
    é atribuído à variável users o retorno da pesquisa. Através do loop
    for cada u assume a forma de uma tupla do seguinte modelo:
    
    ('noobpythonbr', 'minhasenha')
    
    Sendo o primeiro elemento o usuário e o segundo a senha. Com uma comparação
    simples e usando o operador and podemos verificar se existe
    algum usuário com exatamente as mesmas credencias passadas como parâmetro
    para o método.
    
    Caso encontre, o método retorna True, caso contrário retorna False.
    """
    
    users = self.cursor.execute("SELECT * FROM users")
    for u in users.fetchall():
        if u[0] == username and u[1] == password:
            return True
    return False
    </code></pre>
    
<div class="comment">
        <p>Por fim, instancio um objeto chamado banco da nossa classe Banco.</p>
    </div>
    
    <pre><code class="language-python">
banco = Banco()
    </code></pre>
    
    
	</main>
	
	<footer class="footer">
	    <div class="container">
	        <div>
				<p id="assinatura">Desenvolvido por Nathan Bahia</p>
				<p id="apresentacao">Administrador de Empresas, graduando em Análise e Desenvolvimento de Sistemas e terminando um MBA em Gestão Financeira. Sou apaixonado por tecnologia e administração e espero que possa contribuir de alguma maneira com este canal.</p>
			</div>
	        <ul class='navbar nav '>
				<li><a target="blank" href="https://github.com/Nathanbahia"><i class="fab fa-github-square"></i></a></li>
				<li><a target="blank" href="https://linkedin.com/in/nathanbahia"><i class="fab fa-linkedin"></i></a></li>
				<li><a target="blank" href="https://instagram.com/noobpythonbr"><i class="fab fa-instagram"></i></a></li>
			</ul>
	    </div>
	</footer>
	
    

    <script src="src/js/prism.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
  </body>
</html>
